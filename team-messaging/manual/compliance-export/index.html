<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      // Hack for scrolling window when linking to anchor tag with fixed nav header
      var shiftWindow = function() { scrollBy(0, -75) };
      window.addEventListener("hashchange", shiftWindow);
      function load() { if (window.location.hash) shiftWindow(); }
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://github.com/ringcentral/ringcentral-api-docs/team-messaging/manual/compliance-export/">
    <link rel="shortcut icon" href="../../../favicon.ico">
    
    <title>Compliance Export - Developing with RingCentral</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css" rel="stylesheet">
    <link href="../../../css/code-styles.css" rel="stylesheet">
    <link href="../../../css/code-tabs.css" rel="stylesheet">
    <link href="../../../css/admonition.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/ringcentral.css" rel="stylesheet">
    <link href="../../../extra.css" rel="stylesheet">
    <link href="../../../css/mega-menu.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="../../../fonts.js"></script>
    <script src="https://kit.fontawesome.com/2a3737b952.js" crossorigin="anonymous"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-57519112-1', 'developers.ringcentral.com');
      ga('send', 'pageview');
    </script> 
  </head>
  
  <body class="office " data-spy="scroll" data-target="#toc">
      <header>
    <div class="top-mininav container">
      <ul class="nav justify-content-end">
        <li class="nav-item"><a href="https://www.ringcentral.com/apps" rel="nofollow">App Gallery</a></li>
        <li class="nav-item"><a href="https://www.ringcentral.com/" rel="nofollow">RingCentral Home</a></li>
      </ul>
    </div>
    <nav class="navbar navbar-expand-lg primary">
      <div class="container">
        <a class="navbar-brand" href="https://developers.ringcentral.com/" rel="nofollow">
          <img src="../../../img/logo_beta.svg" class="d-inline-block align-top" alt="">
        </a>
        <div class="collapse navbar-collapse dpw-category-nav">
          <ul class="navbar-nav">
            <li class="nav-item office active dpw-category">
              <a class="nav-link" href="https://developers.ringcentral.com/">Office <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item engage dpw-category">
              <a class="nav-link" href="https://developers.ringcentral.com/engage/api-products/digital">Engage</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="navbar navbar-expand secondary">
      <div id="secondary-nav" class="collapse navbar-collapse container">
        <ul class="nav navbar-nav">
          <li class="dropdown mega-dropdown products horiz-nav-item nav-item">
            <a href="#" data-toggle="dropdown">Product</a>        
            <div class="dropdown-menu mega-dropdown-menu">
              <ul class="row">
                <li class="col-sm-2 secondary-nav-cta">
                  <div class="secondary-nav-cta-content">
                    <p class="h3">Products</p>
                    <p>Try all of our APIs for free in your very own secure development sandbox.</p>
                    <a href="https://developers.ringcentral.com/guide" rel="nofollow" class="btn btn-primary">Get Started</a>
                  </div>
                </li>
                <li class="col-sm-3 secondary-nav-links">
                  <p class="h4">APIs</p>
                  <ul>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/voice" rel="nofollow">Voice</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/sms" rel="nofollow">SMS/MMS</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/team-messaging" rel="nofollow">Glip Messaging</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/meetings" rel="nofollow">Meetings</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/fax" rel="nofollow">Fax</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/data" rel="nofollow">Data</a></li>
                    <li><a class="nav-link" href="https://developer.ringcentral.com/api-products/configuration" rel="nofollow">Configuration</a></li>
                  </ul>
                </li>
                <li class="col-sm-3  secondary-nav-links">
                  <p class="h4">App Gallery</p>
                  <ul>
                    <li><a href="https://www.ringcentral.com/apps/?appCategory=Automation" rel="nofollow">Automation</a></li>
                    <li><a href="https://www.ringcentral.com/apps/?appCategory=Bots%20%26%20Notifications" rel="nofollow">Bots & Notification</a></li>
                    <li><a href="https://www.ringcentral.com/apps/?appCategory=Customer%20Support" rel="nofollow">Customer Support</a></li>
                    <li><a href="https://www.ringcentral.com/apps/?appCategory=CRM" rel="nofollow">CRM</a></li>
                    <li><a href="https://www.ringcentral.com/apps/?appCategory=Healthcare" rel="nofollow">Healthcare</a></li>
                    <li><a href="https://www.ringcentral.com/apps/" rel="nofollow">Browse all categories</a></li>
                  </ul>
                </li>
                <li class="col-sm-3 secondary-nav-links">
                  <p class="h4">Widgets</p>
                  <ul>
                    <li><a href="https://developer.ringcentral.com/embeddable-voice.html" rel="nofollow">RingCentral Embeddable</a></li>
                    <li><a href="https://github.com/ringcentral/ringcentral-embeddable-extension-factory" rel="nofollow">Chrome Kit</a></li>
                    <li><a href="https://github.com/ringcentral/ringcentral-embeddable-for-google-firefox-addon" rel="nofollow">Firefox Kit</a></li>
                    <li><a href="https://github.com/ringcentral/ringcentral-c2d" rel="nofollow">Click-to-Dial</a></li>
                  </ul>
                </li>
                <li class="col-sm-1 secondary-nav-links"></li>
              </ul>
            </div>       
          </li>
          <li class="dropdown mega-dropdown resources horiz-nav-item nav-item">
            <a href="https://developers.ringcentral.com/api-and-docs.html" data-toggle="dropdown">Resources</a>        
            <div class="dropdown-menu mega-dropdown-menu">
              <ul class="row">
                <li class="col-sm-2 secondary-nav-cta">
                  <div class="secondary-nav-cta-content">  
                    <p class="h3">Resources</p>
                    <p>Build your first app in your preferred programming language in 5 minutes or less.</p>
                    <a href="https://developers.ringcentral.com/guide" rel="nofollow" class="btn">Get Started</a>
                  </div>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Documentation</p>
                  <ul>
                    <li><a href="https://developers.ringcentral.com/guide" rel="nofollow">Getting started</a></li>
                    <li><a href="https://developers.ringcentral.com/guide" rel="nofollow">Developer Guide</a></li>
                    <li><a href="https://developers.ringcentral.com/tutorials.html" rel="nofollow">Browse tutorials</a></li>
                    <li><a href="https://ringcentral-api-changelog.readthedocs.io/en/latest/" rel="nofollow">API changelog</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">API Reference</p>
                  <ul>
                    <li><a href="https://developers.ringcentral.com/api-reference/Call-Log" rel="nofollow">Call log</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference/RingOut" rel="nofollow">RingOut</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference/SMS" rel="nofollow">SMS</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference/Chats" rel="nofollow">Team messaging</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference/Meeting-Management" rel="nofollow">Meetings</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference/Fax" rel="nofollow">Fax</a></li>
                    <li><a href="https://developers.ringcentral.com/api-reference" rel="nofollow">See all APIs</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Downloads</p>
                  <ul>
                    <li><a href="https://developers.ringcentral.com/guide/sdks" rel="nofollow">SDKs</a></li>
                    <li><a href="https://developers.ringcentral.com/library/chatbots.html" rel="nofollow">SMS bot frameworks</a></li>
                    <li><a href="https://developers.ringcentral.com/library/chatbots.html" rel="nofollow">Glip bot frameworks</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Use Cases</p>
                  <ul>
                    <li><a href="https://www.ringcentral.com/whyringcentral/casestudies.html?product=16" rel="nofollow">Case studies</a></li>
                    <li><a href="https://www.ringcentral.com/resources/learning-center.html#whitepapers" rel="nofollow">Whitepapers</a></li>
                  </ul>
                </li>
              </ul>
            </div>           
          </li>
          <li class="dropdown mega-dropdown community horiz-nav-item nav-item">
            <a href="https://developers.ringcentral.com/community.html" data-toggle="dropdown">Community</a>        
            <div class="dropdown-menu mega-dropdown-menu">
              <ul class="row">
                <li class="col-sm-2 secondary-nav-cta">
                  <div class="secondary-nav-cta-content">
                    <p class="h3">Community</p>
                    <p>Grow your skills, earn RingCentral swag, software, conference passes, electronics, and more.</p>
                    <a href="https://gamechanging.dev/" class="btn" rel="nofollow">Become a Game Changer</a>
                  </div>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Discuss</p>
                  <ul>
                    <li><a href="https://developers.ringcentral.com/go-to-community.html" rel="nofollow">Developer Forum</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/ringcentral" rel="nofollow">StackOverflow</a></li>
                    <li><a href="https://developers.ringcentral.com/community.html" rel="nofollow">Live Chat via Glip</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Learn</p>
                  <ul>
                    <li><a href="https://medium.com/ringcentral-developers" rel="nofollow">Blog</a></li>
                    <li><a href="https://developers.ringcentral.com/support/developer-events.html" rel="nofollow">Events</a></li>
                    <li><a href="https://go.ringcentral.com/Developer-Webinar-Series-Registration.html" rel="nofollow">Webinars</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Share</p>
                  <ul>
                    <li><a href="https://twitter.com/RingCentralDevs" rel="nofollow">Twitter</a></li>
                    <li><a href="https://github.com/ringcentral/" rel="nofollow">Github</a></li>
                    <li><a href="https://www.youtube.com/watch?v=H4n-7dBFTEc&list=PLpfipw7KaEwagUy8S4Za25usqFg4bWiAx" rel="nofollow">YouTube</a></li>
                  </ul>
                </li>
                <li class="col-sm-2 secondary-nav-links">
                  <p class="h4">Partner</p>
                  <ul>
                    <li><a href="https://www.ringcentral.com/apps/" rel="nofollow">App Gallery</a></li>
                    <li><a href="https://www.ringcentral.com/partner/isv.html" rel="nofollow">Partner Program</a></li>
                  </ul>
                </li>
              </ul>
            </div>           
          </li>
          <li class="gamechangers horiz-nav-item nav-item"><a href="https://gamechanging.dev/" rel="nofollow">Game Changers</a></li>
          <li class="dropdown mega-dropdown support horiz-nav-item nav-item">
            <a href="https://developers.ringcentral.com/support.html" data-toggle="dropdown">Support</a>        
            <div class="dropdown-menu mega-dropdown-menu">
              <ul class="row">
                <li class="col-sm-2 secondary-nav-cta">
                  <div class="secondary-nav-cta-content">
                    <p class="h3">Support</p>
                    <p>Get your questions answered by our amazing community in the RingCentral Developers forum.</p>
                    <a href="https://developers.ringcentral.com/go-to-community.html" rel="nofollow" class="btn">Post in the forum</a>
                  </div>
                </li>
                <li class="col-sm-3 secondary-nav-links">
                  <p class="h4">Support</p>
                  <ul>
                    <li><a href="https://ringcentral-faq.readthedocs.io/" rel="nofollow">FAQs</a></li>
                    <li><a href="https://developers.ringcentral.com/go-to-community.html" rel="nofollow">Developer Forum</a></li>
                    <li><a href="https://developers.ringcentral.com/api/support-cases/create" rel="nofollow">Create a ticket</a></li>
                    <li><a href="https://developers.ringcentral.com/api/support-cases/check" rel="nofollow">View your tickets</a></li>
                  </ul>
                </li>
                <li class="col-sm-3 secondary-nav-links">
                  <p class="h4">Professional Services</p>
                  <ul>
                    <li><a href="https://developers.ringcentral.com/support/services.html" rel="nofollow">Let us build the perfect app for you</a></li>
                  </ul>
                </li>
              </ul>
            </div>           
          </li>
          <li class="console horiz-nav-item nav-item"><a href="https://developers.ringcentral.com/my-account.html" rel="nofollow">Console</a></li>
        </ul>
      </div><!-- /.nav-collapse -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#secondary-nav" aria-controls="secondary-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </header>
    <div id="content"class="container-fluid">
      
    <div class="row flex-nowrap"><div id="sidebar-nav" class="sidebar col-md-3"><nav id="sidenav" class="navbar navbar-default navbar-expand-md navbar-dark" role="navigation">
  <a class="navbar-brand d-block d-md-none d-xl-none" href="#"><i class="fa fa-home fa-fw"></i> Table of Contents</a>
  <button class="navbar-toggler ml-auto hidden-sm-up float-xs-right" type="button" data-toggle="collapse" data-target="#sidebar-navbar-collapse" aria-controls="sidebar-navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="sidebar-navbar-collapse">
    <!-- Main navigation -->
    <ul class="nav navbar-nav flex-column">
      <li id="nav-item-voice" class="toplevel nav-item" data-toggle="collapse" data-target="#voice">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Voice</span>
        <ul id="voice" class="collapse">
          
<li>
    <a href="../../../voice/" class="">Overview</a>
</li>
          
<li>
    <a href="../../../voice/quick-start/" class="">Getting Started</a>
</li>
          
<li>
  <span>Placing Calls</span>
  <!--<a href="#" class="">Placing Calls</a>-->
  <ul>
    
<li>
    <a href="../../../voice/ringout/" class="">RingOut</a>
</li>
    
<li>
    <a href="../../../voice/webrtc/" class="">WebRTC</a>
</li>
    
<li>
    <a href="../../../voice/uri-scheme/" class="">URI Scheme</a>
</li>
  </ul>
</li>
          
<li>
  <span>Call Routing</span>
  <!--<a href="#" class="">Call Routing</a>-->
  <ul>
    
<li>
    <a href="../../../voice/call-routing/" class="">Overview</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/get-started/" class="">Get Started</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/answering-rules/" class="">Answering Rules Overview</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/user-answering-rules/" class="">User Answering Rules</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/company-answering-rules/" class="">Company Answering Rules</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/call-queues/" class="">Call Queues</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/call-queues-presence/" class="">Call Queues Presence</a>
</li>
    
<li>
    <a href="../../../voice/call-routing/manual/call-forwarding/" class="">Call Forwarding/Flipping</a>
</li>
  </ul>
</li>
          
<li>
  <span>Call Control</span>
  <!--<a href="#" class="">Call Control</a>-->
  <ul>
    
<li>
    <a href="../../../voice/call-control/" class="">Overview</a>
</li>
    
<li>
    <a href="../../../voice/finding-active-calls/" class="">Finding active calls</a>
</li>
    
<li>
    <a href="../../../voice/call-control-sessions/" class="">Detecting state changes</a>
</li>
    
<li>
    <a href="../../../voice/pre-call-control/" class="">Pre-call Control</a>
</li>
    
<li>
    <a href="../../../voice/active-call-control/" class="">Active-call Control</a>
</li>
    
<li>
    <a href="../../../voice/supervision/" class="">Call Monitoring</a>
</li>
    
<li>
    <a href="../../../voice/conference/" class="">Conference call</a>
</li>
    
<li>
    <a href="../../../voice/warm-transfer/" class="">Warm Transfer</a>
</li>
    
<li>
    <a href="../../../voice/telephony-session-notifications/" class="">Telephony Session Notifications</a>
</li>
    
<li>
    <a href="https://github.com/ringcentral/ringcentral-call-control-js" class="">Call Control SDK</a>
</li>
  </ul>
</li>
          
<li>
  <span>Call Logs</span>
  <!--<a href="#" class="">Call Logs</a>-->
  <ul>
    
<li>
    <a href="../../../voice/call-log/reading-call-log/" class="">Reading Call Log Data</a>
</li>
    
<li>
    <a href="../../../voice/call-log/api/" class="">Data Types</a>
</li>
    
<li>
    <a href="../../../voice/call-log/details/" class="">Detailed Call Log Data</a>
</li>
    
<li>
    <a href="../../../voice/call-log/archival/" class="">Data Archival</a>
</li>
    
<li>
    <a href="../../../voice/call-log/recordings/" class="">Call Recordings</a>
</li>
    
<li>
    <a href="../../../voice/call-log/sync/" class="">Synchronization</a>
</li>
    
<li>
    <a href="../../../voice/call-log/best-practices/" class="">Best Practices</a>
</li>
    
<li>
    <a href="../../../voice/call-log/access/" class="">Access Control</a>
</li>
  </ul>
</li>
          
<li>
  <span>Call Analytics</span>
  <!--<a href="#" class="">Call Analytics</a>-->
  <ul>
    
<li>
    <a href="../../../voice/calculating-call-time-metrics/" class="">Calculating Call Metrics</a>
</li>
  </ul>
</li>
          
<li>
  <span>Sample Applications</span>
  <!--<a href="#" class="">Sample Applications</a>-->
  <ul>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/getting-started-with-webrtc-js-demo/" class="">Building a Web Phone with WebRTC</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/calllog-analytics-swift-demo/" class="">Call Log Analytics for iOS</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/calllog-visualization-nodejs-demo/" class="">Call Log Visualizations</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/callrecording-notification-node/" class="">Call Recording Push Notification</a>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-sms-and-fax" class="toplevel nav-item" data-toggle="collapse" data-target="#sms-and-fax">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">SMS and Fax</span>
        <ul id="sms-and-fax" class="collapse">
          
<li>
    <a href="../../../messaging/" class="">Overview</a>
</li>
          
<li>
    <a href="../../../messaging/quick-start/" class="">Getting Started</a>
</li>
          
<li>
  <span>Standard SMS</span>
  <!--<a href="#" class="">Standard SMS</a>-->
  <ul>
    
<li>
    <a href="../../../messaging/sms/best-practices/" class="">Best Practices</a>
</li>
    
<li>
    <a href="../../../messaging/sms/sending-sms/" class="">Sending an SMS</a>
</li>
    
<li>
    <a href="../../../messaging/sms/sending-images/" class="">Sending an MMS</a>
</li>
    
<li>
    <a href="../../../messaging/sms/valid-sms-numbers/" class="">Valid SMS Numbers</a>
</li>
  </ul>
</li>
          
<li>
  <span>High Volume SMS</span>
  <!--<a href="#" class="">High Volume SMS</a>-->
  <ul>
    
<li>
    <a href="../../../messaging/sms/high-volume/" class="">Overview</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/best-practices/" class="">Best Practices</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/sending-highvolume-sms/" class="">Sending High Volume SMS</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/message-store/" class="">Reading High Volume Message Store</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/toll-free-sms-vs-local-numbers/" class="">Toll-Free vs. Local Numbers</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/opt-out/" class="">Opt-in / Opt-out</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/events/" class="">Event Notifications</a>
</li>
    
<li>
    <a href="../../../messaging/sms/high-volume/handling-errors/" class="">Errors Handling</a>
</li>
  </ul>
</li>
          
<li>
  <span>Fax</span>
  <!--<a href="#" class="">Fax</a>-->
  <ul>
    
<li>
    <a href="../../../messaging/fax/sending-faxes/" class="">Sending Faxes</a>
</li>
    
<li>
    <a href="../../../messaging/fax/fax-multipart-formats/" class="">Multipart Formats</a>
</li>
    
<li>
    <a href="../../../messaging/fax/receiving-faxes/" class="">Receiving Faxes</a>
</li>
    
<li>
    <a href="../../../messaging/fax/resending-faxes/" class="">Forwarding and Resending Faxes</a>
</li>
  </ul>
</li>
          
<li>
  <span>Pager Messages</span>
  <!--<a href="#" class="">Pager Messages</a>-->
  <ul>
    
<li>
    <a href="../../../messaging/pager/sending-pager-messages/" class="">Sending Pager Messages</a>
</li>
  </ul>
</li>
          
<li>
  <span>Message Store</span>
  <!--<a href="#" class="">Message Store</a>-->
  <ul>
    
<li>
    <a href="../../../messaging/message-store/messaging/" class="">Sending Messages</a>
</li>
    
<li>
    <a href="../../../messaging/message-store/working-with-message-store/" class="">Working with Message Store</a>
</li>
    
<li>
    <a href="../../../messaging/message-store/message-sync/" class="">Message Synchronization</a>
</li>
    
<li>
    <a href="../../../messaging/message-store/message-histories/" class="">Modifying Message Histories</a>
</li>
    
<li>
    <a href="../../../messaging/message-store/message-exports-report/" class="">Message Store Export</a>
</li>
  </ul>
</li>
          
<li>
  <span>Sample Applications</span>
  <!--<a href="#" class="">Sample Applications</a>-->
  <ul>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/sms-api-nodejs-demo/" class="">SMS Sample App Walkthrough</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/a2p-sms-messaging-nodejs-demo/" class="">A2P SMS Messaging</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/sms-2fa-nodejs-demo/" class="">Two-factor Authentication</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/fax-cover-page-nodejs-demo/" class="">Custom Fax Cover Pages</a>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-team-messaging" class="toplevel nav-item active" data-toggle="collapse" data-target="#team-messaging">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Team Messaging</span>
        <ul id="team-messaging" class="collapse">
          
<li>
    <a href="../../" class="">Overview</a>
</li>
          
<li>
    <a href="../../quick-start/" class="">Getting Started</a>
</li>
          
<li>
  <span>Posting Messages</span>
  <!--<a href="#" class="">Posting Messages</a>-->
  <ul>
    
<li>
    <a href="../posting/" class="">Simple text messages</a>
</li>
    
<li>
    <a href="../posting-cards/" class="">Posting Cards</a>
</li>
    
<li>
    <a href="../posting-images/" class="">Posting Images</a>
</li>
    
<li>
    <a href="../attaching-files/" class="">Uploading and posting files</a>
</li>
  </ul>
</li>
          
<li>
  <span>Chats, Groups, Teams</span>
  <!--<a href="#" class="">Chats, Groups, Teams</a>-->
  <ul>
    
<li>
    <a href="../chats/" class="">Chats</a>
</li>
    
<li>
    <a href="../conversations/" class="">Conversations</a>
</li>
    
<li>
    <a href="../teams/" class="">Teams</a>
</li>
    
<li>
    <a href="../pagination/" class="">Pagination</a>
</li>
  </ul>
</li>
          
<li>
  <span>Incoming Webhooks</span>
  <!--<a href="#" class="">Incoming Webhooks</a>-->
  <ul>
    
<li>
    <a href="../webhook-creation/" class="">Webhook Creation</a>
</li>
    
<li>
    <a href="../webhook-posting/" class="">Webhook Posting (v2)</a>
</li>
    
<li>
    <a href="../formatting/" class="">Webhook Posting (v1)</a>
</li>
    
<li>
    <a href="../testing-webhooks/" class="">Testing using cURL</a>
</li>
  </ul>
</li>
          
<li>
  <span>Compliance Export</span>
  <!--<a href="#" class="">Compliance Export</a>-->
  <ul>
    
<li>
    <a href="./" class=" active">Compliance Export</a>
</li>
    
<li>
    <a href="../compliance-export-structure/" class="">Export File Structure</a>
</li>
  </ul>
</li>
          
<li>
  <span>Bots</span>
  <!--<a href="#" class="">Bots</a>-->
  <ul>
    
<li>
    <a href="../local-bots/" class="">Building a Bot Locally</a>
</li>
    
<li>
    <a href="../node/" class="">Build a Bot in Node</a>
</li>
    
<li>
    <a href="../frameworks/" class="">Bot Frameworks</a>
</li>
  </ul>
</li>
          
<li>
  <span>Outgoing Events and Webhooks</span>
  <!--<a href="#" class="">Outgoing Events and Webhooks</a>-->
  <ul>
    
<li>
    <a href="../outgoing-webhooks/" class="">Subscribing to Webhooks</a>
</li>
    
<li>
    <a href="../events-posts/" class="">Post Events</a>
</li>
    
<li>
    <a href="../events-groups/" class="">Chat Events</a>
</li>
    
<li>
    <a href="../events-incoming-webhooks/" class="">Incoming Webhook Events</a>
</li>
  </ul>
</li>
          
<li>
    <a href="../links/" class="">Deep links</a>
</li>
          
<li>
  <span>Sample Applications</span>
  <!--<a href="#" class="">Sample Applications</a>-->
  <ul>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/botkit-watson-bot-nodejs-demo/" class="">Bot using IBM Watson and Botkit</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/ringcentral-ai-bot/" class="">Voicemail Transcription Bot</a>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-meetings" class="toplevel nav-item" data-toggle="collapse" data-target="#meetings">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Meetings</span>
        <ul id="meetings" class="collapse">
          
<li>
    <a href="../../../meetings/" class="">Overview</a>
</li>
          
<li>
    <a href="../../../meetings/quick-start/" class="">Getting Started</a>
</li>
          
<li>
    <a href="../../../meetings/video/" class="">RingCentral Video API</a>
</li>
          
<li>
    <a href="../../../meetings/embeddable/" class="">Embeddable</a>
</li>
        </ul>
      </li><li class="divider"><hr></li>
      <li id="nav-item-using-the-api" class="toplevel nav-item" data-toggle="collapse" data-target="#using-the-api">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Using the API</span>
        <ul id="using-the-api" class="collapse">
          
<li>
    <a href="../../../basics/uris/" class="">Methods, endpoints and parameters</a>
</li>
          
<li>
    <a href="../../../basics/explorer/" class="">Exploring the API</a>
</li>
          
<li>
    <a href="../../../basics/your-rc-phone/" class="">Using phones in sandbox</a>
</li>
          
<li>
    <a href="../../../basics/media/" class="">Media content</a>
</li>
          
<li>
    <a href="../../../basics/permissions/" class="">App permissions</a>
</li>
          
<li>
    <a href="../../../basics/uri-schemes/" class="">URI schemes</a>
</li>
          
<li>
    <a href="../../../basics/rate-limits/" class="">Rate limits</a>
</li>
          
<li>
  <span>API Change Log</span>
  <!--<a href="#" class="">API Change Log</a>-->
  <ul>
    
<li>
    <a href="../../../basics/changelog/" class="">Preface</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_47/" class="">v.1.0.47 (May 2021)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_46/" class="">v.1.0.46 (Feb 2021)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_45/" class="">v.1.0.45 (Nov 2020)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_44/" class="">v.1.0.44 (Aug 2020)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_43/" class="">v.1.0.43 (May 2020)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_42/" class="">v.1.0.42 (Feb 2020)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_41/" class="">v.1.0.41 (Dec 2019)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_40/" class="">v.1.0.40 (Aug 2019)</a>
</li>
    
<li>
    <a href="../../../basics/changelog/1_0_39/" class="">v.1.0.39 (May 2019)</a>
</li>
  </ul>
</li>
          
<li>
    <a href="../../../basics/api-index/" class="">API Quick Reference</a>
</li>
        </ul>
      </li>
      <li id="nav-item-applications" class="toplevel nav-item" data-toggle="collapse" data-target="#applications">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Applications</span>
        <ul id="applications" class="collapse">
          
<li>
  <span>Development Lifecycle</span>
  <!--<a href="#" class="">Development Lifecycle</a>-->
  <ul>
    
<li>
    <a href="../../../basics/your-first-steps/" class="">Tips for your first app</a>
</li>
    
<li>
    <a href="../../../basics/create-app/" class="">Create an application</a>
</li>
    
<li>
    <a href="../../../basics/sandbox/" class="">Develop in sandbox</a>
</li>
    
<li>
    <a href="../../../basics/production/" class="">Graduate to production</a>
</li>
  </ul>
</li>
          
<li>
  <span>App Promotion</span>
  <!--<a href="#" class="">App Promotion</a>-->
  <ul>
    
<li>
    <a href="../../../basics/app-gallery/" class="">Submit to the App Gallery</a>
</li>
    
<li>
    <a href="../../../basics/update-profile/" class="">Update a Profile</a>
</li>
    
<li>
    <a href="../../../basics/app-gallery-checklist/" class="">Checklist and Best Practices</a>
</li>
  </ul>
</li>
          
<li>
  <span>Application Management</span>
  <!--<a href="#" class="">Application Management</a>-->
  <ul>
    
<li>
    <a href="../../../basics/lead-forms/" class="">Using Lead Forms</a>
</li>
    
<li>
    <a href="../../../basics/install-app-button/" class="">Install App Buttons</a>
</li>
  </ul>
</li>
          
<li>
  <span>Partner Ecosystem</span>
  <!--<a href="#" class="">Partner Ecosystem</a>-->
  <ul>
    
<li>
    <a href="../../../basics/partner-compatibility/" class="">Overview</a>
</li>
    
<li>
    <a href="../../../basics/partners/segregated-environments/" class="">Technical Requirements</a>
</li>
    
<li>
  <span>Brand Guidelines</span>
  <!--<a href="#" class="">Brand Guidelines</a>-->
  <ul>
    
<li>
    <a href="../../../basics/partners/att/" class="">AT&T Office@Hand</a>
</li>
    
<li>
    <a href="../../../basics/partners/aco/" class="">Avaya Cloud Office</a>
</li>
    
<li>
    <a href="../../../basics/partners/bt/" class="">BT Cloud Work</a>
</li>
    
<li>
    <a href="../../../basics/partners/alcatel/" class="">Rainbow Office</a>
</li>
    
<li>
    <a href="../../../basics/partners/telus/" class="">TELUS Business Connect</a>
</li>
    
<li>
    <a href="../../../basics/partners/atos/" class="">Unify Office</a>
</li>
  </ul>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-account" class="toplevel nav-item" data-toggle="collapse" data-target="#account">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Account</span>
        <ul id="account" class="collapse">
          
<li>
    <a href="../../../account/" class="">Overview</a>
</li>
          
<li>
    <a href="../../../account/extensions/" class="">Users and Extensions</a>
</li>
          
<li>
    <a href="../../../account/phone-numbers/" class="">Phone Numbers</a>
</li>
          
<li>
    <a href="../../../account/call-forwarding-flipping/" class="">Call Forwarding/Flipping</a>
</li>
          
<li>
    <a href="../../../account/feature-flags/" class="">User Feature Flags</a>
</li>
          
<li>
    <a href="../../../account/custom-fields/" class="">Custom Fields</a>
</li>
          
<li>
    <a href="../../../account/presence/" class="">Presence</a>
</li>
        </ul>
      </li>
      <li id="nav-item-authentication" class="toplevel nav-item" data-toggle="collapse" data-target="#authentication">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Authentication</span>
        <ul id="authentication" class="collapse">
          
<li>
    <a href="../../../authentication/" class="">Overview</a>
</li>
          
<li>
    <a href="../../../authentication/quick-start/" class="">Getting Started</a>
</li>
          
<li>
  <span>Developer Manual</span>
  <!--<a href="#" class="">Developer Manual</a>-->
  <ul>
    
<li>
    <a href="../../../authentication/auth-code-flow/" class="">Auth code flow</a>
</li>
    
<li>
    <a href="../../../authentication/auth-code-pkce-flow/" class="">Auth code flow with PKCE</a>
</li>
    
<li>
    <a href="../../../authentication/password-flow/" class="">Password flow</a>
</li>
    
<li>
    <a href="../../../authentication/implicit-grant-flow/" class="">Implicit grant flow</a>
</li>
    
<li>
    <a href="../../../authentication/tokens/" class="">Using auth tokens</a>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-address-book" class="toplevel nav-item" data-toggle="collapse" data-target="#address-book">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Address Book</span>
        <ul id="address-book" class="collapse">
          
<li>
    <a href="../../../address-book/" class="">Overview</a>
</li>
        </ul>
      </li>
      <li id="nav-item-notifications-and-events" class="toplevel nav-item" data-toggle="collapse" data-target="#notifications-and-events">
	<!--<i class="nav-item-icon"></i>-->
        <span class="section-title">Notifications and Events</span>
        <ul id="notifications-and-events" class="collapse">
          
<li>
    <a href="../../../notifications/" class="">Overview</a>
</li>
          
<li>
  <span>Push Notifications</span>
  <!--<a href="#" class="">Push Notifications</a>-->
  <ul>
    
<li>
    <a href="../../../notifications/push-notifications/quick-start/" class="">Getting Started</a>
</li>
    
<li>
    <a href="../../../notifications/push-notifications/pubnub/" class="">Using PubNub</a>
</li>
  </ul>
</li>
          
<li>
  <span>WebHooks</span>
  <!--<a href="#" class="">WebHooks</a>-->
  <ul>
    
<li>
    <a href="../../../notifications/webhooks/quick-start/" class="">Getting Started</a>
</li>
    
<li>
    <a href="../../../notifications/webhooks/creating-webhooks/" class="">Creating Webhooks</a>
</li>
    
<li>
    <a href="../../../notifications/webhooks/receiving/" class="">Receiving Webhooks</a>
</li>
    
<li>
    <a href="../../../notifications/webhooks/configuring-tls-ssl/" class="">Configuring TLS/SSL</a>
</li>
  </ul>
</li>
          
<li>
  <span>Sample Applications</span>
  <!--<a href="#" class="">Sample Applications</a>-->
  <ul>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/sms-api-nodejs-quickstart/" class="">Create SMS Push Notification</a>
</li>
    
<li>
    <a href="https://ringcentral-tutorials.github.io/a2p-sms-messaging-nodejs-demo/" class="">A2P SMS Messaging</a>
</li>
  </ul>
</li>
        </ul>
      </li>
      <li id="nav-item-downloads-and-sdks" class="toplevel nav-item">
        <a class="section-title nav-link" href="../../../sdks/">Downloads and SDKs</a>
      </li>
      <li id="nav-item-ringcentral-labs" class="toplevel nav-item">
        <a class="section-title nav-link" href="../../../labs/">RingCentral Labs</a>
      </li>
    </ul>
  </div>
</nav>
</div><div id="main" class="col" role="main">


<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    
    
    <li class="breadcrumb-item">Primary</li>
    
    
    
    <li class="breadcrumb-item">Team Messaging</li>
    
    
    
    <li class="breadcrumb-item">Compliance Export</li>
    
    
    <li class="breadcrumb-item active" aria-current="page">Compliance Export</li>
  </ol>
</nav>


<h1 id="ringcentral-team-messaging-compliance-exports">RingCentral Team Messaging Compliance Exports</h1>
<p>Compliance Exports is a special capability specifically built for companies and regulated industries, such as financial services and health care, with compliance requirements for using electronic communication in the workplace. This feature is also a fail-safe way of preserving business communications for compliance and legal discovery or internal review.</p>
<details class="important"><summary>Admin priveleges are required to call the Compliance Export APIs</summary><p>The Compliance Export APIs run at the account level. This means that only users with the admin role are permitted to call these APIs in order to export the data of all users in the entire account.</p>
<p>The Compliance Exports feature must be turned on from the RingCentral App in the Administration settings.</p>
</details>
<h2 id="ringcentrals-data-retention-policy">RingCentral's Data Retention Policy</h2>
<p>The Compliance Export API allows any data retention practices to be automated and is essential for regulated industries because RingCentral does not retain customer data indefinitely. Our data retention policy is as follows, depending upon whether your account is "HIPAA enabled" (please consult your account representative or support to inquire about your account settings).</p>
<table class="table">
<thead>
<tr>
<th scope="col">Account</th>
<th scope="col">Data Retention Rule</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Non-HIPAA</strong></td>
<td>The account admin can set the retention policy to one of the following: 30, 60 and 90 days. Once a policy is set, on a nightly basis all content older than the specified number of days will be deleted permanently.</td>
</tr>
<tr>
<td><strong>HIPAA enabled</strong></td>
<td>All data will be deleted after 30 days.</td>
</tr>
</tbody>
</table>
<h3 id="changing-your-data-retention-policy">Changing your data retention policy</h3>
<p>The RingCentral App provides admins with a way of modifying your account's data retention policy. Login to RingCentral App, and navigate to the Settings area. Then select "Administration." There you will see "Manage data retention policy."</p>
<p><img class="img-fluid" src="../manage-data-retention-1.png"></p>
<h2 id="team-messaging-data-export-process">Team Messaging Data Export Process</h2>
<p>Team Messaging Exports can take some time to compile and make available for download. Therefore, the process is an asynchronous one that follows this simple 3-step flow:</p>
<ol>
<li>Developer creates an "Export Report" task.</li>
<li>Developer polls to check the status of the created "Export Report" task.</li>
<li>When the task is complete, developer downloads the generated file.</li>
</ol>
<p>What follows is a more detailed walk-through of this process.</p>
<h3 id="creating-an-export-report-task">Creating an Export Report Task</h3>
<p>A compliance export task can be created by administrators inside of the RingCentral client under the Administration section.</p>
<p><img class="img-fluid" src="../compliance-exports-ui.png" style="max-width: 450px"></p>
<p>This is helpful to human beings, but is difficult to automate. To create an export task via the API one would need to:</p>
<ul>
<li>Specify the period of time for the archive via the <code>timeFrom</code> and <code>timeTo</code> parameters.</li>
<li>Specify a list of users whose data you would like to export via the <code>contacts</code> parameter. A <code>contact</code> is an object and can be specified by an id number or an email address.</li>
<li>Specify a list of teams/conversations to export via the <code>chatIds</code> parameter.</li>
<li>Finally, make a POST request to the <code>/restapi/v1.0/glip/data-export</code> endpoint.</li>
</ul>
<div class="admonition hint">
<p class="admonition-title">How to find IDs to filter by</p>
<p>Valid <code>chatIds</code> can be retrieved using the <a href="https://developers.ringcentral.com/api-reference/Chats/listGlipChats">Get Chats API</a> to read all teams/chats/conversations.</p>
</div>
<p>Required permission(s):  Glip</p>
<p>If successful, the response will contain the task ID and the status of the newly created task as shown below.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://platform.ringcentral.com/restapi/v1.0/glip/data-export/809646016-xx-yy&quot;</span><span class="p">,</span>
<span class="hll">  <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;809646016-xx-yy&quot;</span><span class="p">,</span>
</span>  <span class="nt">&quot;creationTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lastModifiedTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;Accepted&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;62288329016&quot;</span><span class="p">,</span>
    <span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="s2">&quot;Paco&quot;</span><span class="p">,</span>
    <span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="s2">&quot;Vu&quot;</span><span class="p">},</span>
  <span class="nt">&quot;specific&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;timeFrom&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-14T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timeTo&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="polling-the-status-of-the-export-task">Polling the Status of the Export Task</h3>
<p>To archive a large data export report (for a long period of time or for an account with a large number of extensions), the report creation process may take several minutes to complete. Therefore, you will need to periodically check the status of a task. When its status is marked as "Completed" you can proceed to get the report. The status of a task can be any of the following values:</p>
<ul>
<li>Accepted</li>
<li>Pending</li>
<li>InProgress</li>
<li>AttemptFailed</li>
<li>Failed</li>
<li>Completed</li>
<li>Cancelled</li>
</ul>
<p>To check the status of a task, make a GET request to <code>/restapi/v1.0/glip/data-export/[taskId]</code> endpoint. Where the <code>taskId</code> is the value of the <code>id</code> returned in the previous step. If the report is ready, the task status is marked as "Completed."</p>
<p>When successful, the response will contain the id (taskId) and the status of the newly created task.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://platform.ringcentral.com/restapi/v1.0/glip/data-export/809646016-xx-yy&quot;</span><span class="p">,</span>
<span class="hll">  <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;809646016-xx-yy&quot;</span><span class="p">,</span>
</span>  <span class="nt">&quot;creationTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;lastModifiedTime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span><span class="p">,</span>
<span class="hll">  <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;Completed&quot;</span><span class="p">,</span>
</span>  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;62288329016&quot;</span><span class="p">,</span>
    <span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="s2">&quot;Paco&quot;</span><span class="p">,</span>
    <span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="s2">&quot;Vu&quot;</span><span class="p">},</span>
  <span class="nt">&quot;specific&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;timeFrom&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-14T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timeTo&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T22:12:55Z&quot;</span>
    <span class="p">},</span>
  <span class="nt">&quot;datasets&quot;</span><span class="p">:[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="mi">3434</span><span class="p">,</span>
      <span class="nt">&quot;uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://media.ringcentral.com/restapi/v1.0/glip/data-export/809646016-xx-yy/datasets/1&quot;</span>
    <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Authentication and file downloads</p>
<p>When an export task has completed successfully, make a GET request to the <code>uri</code> parameter returned in the response as described in the previous step, and pass your access key via an Authorization header or access_token query parameter as described in <a href="../../basics/media/">Accessing protected content</a> on <em>Working with media content</em>.</p>
</div>
<h2 id="sample-code-export-team-messaging-data">Sample Code: Export Team Messaging Data</h2>
<p>The following code sample shows how to call the Compliance Export API to export the team messaging data and save it to a local machine.</p>
<div class="tabbed-set" data-tabs="1:6"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">JavaScript</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">RingCentral</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@ringcentral/sdk&#39;</span><span class="p">).</span><span class="nx">SDK</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;https&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rcsdk</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">RingCentral</span><span class="p">({</span> <span class="nx">server</span><span class="o">:</span> <span class="s2">&quot;server_url&quot;</span><span class="p">,</span> <span class="nx">clientId</span><span class="o">:</span> <span class="s2">&quot;client_id&quot;</span><span class="p">,</span> <span class="nx">clientSecret</span><span class="o">:</span> <span class="s2">&quot;client_secret&quot;</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">platform</span> <span class="o">=</span> <span class="nx">rcsdk</span><span class="p">.</span><span class="nx">platform</span><span class="p">();</span>

<span class="nx">platform</span><span class="p">.</span><span class="nx">login</span><span class="p">({</span> <span class="nx">username</span><span class="o">:</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="nx">extension</span><span class="o">:</span> <span class="s2">&quot;extension_number&quot;</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">create_compliance_export_task</span><span class="p">()</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">create_compliance_export_task</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Create export task.&quot;</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">timeFrom</span><span class="o">:</span> <span class="s2">&quot;2019-08-01T00:00:00.000Z&quot;</span><span class="p">,</span>
    <span class="nx">timeTo</span><span class="o">:</span> <span class="s2">&quot;2019-08-26T23:59:59.999Z&quot;</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">platform</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/restapi/v1.0/glip/data-export&quot;</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">jsonObj</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
    <span class="nx">get_compliance_export_task</span><span class="p">(</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">get_compliance_export_task</span><span class="p">(</span><span class="nx">taskId</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Check export task status ...&quot;</span><span class="p">)</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">platform</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`/restapi/v1.0/glip/data-export/</span><span class="si">${</span><span class="nx">taskId</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">jsonObj</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="s2">&quot;Completed&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">jsonObj</span><span class="p">.</span><span class="nx">datasets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="sb">`rc-export-reports-</span><span class="si">${</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">creationTime</span><span class="si">}</span><span class="sb">_</span><span class="si">${</span><span class="nx">i</span><span class="si">}</span><span class="sb">.zip`</span>
        <span class="nx">get_report_archived_content</span><span class="p">(</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">datasets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="s2">&quot;Accepted&quot;</span> <span class="o">||</span> <span class="nx">jsonObj</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="s2">&quot;InProgress&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">get_compliance_export_task</span><span class="p">(</span><span class="nx">taskId</span><span class="p">)</span>
      <span class="p">},</span> <span class="mf">5000</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">jsonObj</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">get_report_archived_content</span><span class="p">(</span><span class="nx">contentUri</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">uri</span> <span class="o">=</span> <span class="nx">platform</span><span class="p">.</span><span class="nx">createUrl</span><span class="p">(</span><span class="nx">contentUri</span><span class="p">,</span> <span class="p">{</span> <span class="nx">addToken</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
  <span class="nx">download</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Save report zip file to the local machine.&quot;</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">download</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nx">file</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;finish&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">file</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Python</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ringcentral</span> <span class="kn">import</span> <span class="n">SDK</span>
<span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">urllib2</span>

<span class="n">sdk</span> <span class="o">=</span> <span class="n">SDK</span><span class="p">(</span> <span class="s2">&quot;client_id&quot;</span><span class="p">,</span> <span class="s2">&quot;client_secret&quot;</span><span class="p">,</span> <span class="s2">&quot;server_url&quot;</span> <span class="p">)</span>
<span class="n">platform</span> <span class="o">=</span> <span class="n">sdk</span><span class="o">.</span><span class="n">platform</span><span class="p">()</span>
<span class="n">platform</span><span class="o">.</span><span class="n">login</span><span class="p">(</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="s2">&quot;extension&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span> <span class="p">)</span>

<span class="k">def</span> <span class="nf">create_compliance_export_task</span><span class="p">():</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Create export task.&quot;</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/restapi/v1.0/glip/data-export&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;timeFrom&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-07-01T00:00:00.000Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timeTo&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-07-29T23:59:59.999Z&quot;</span>
      <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">json</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">get_compliance_export_task</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_compliance_export_task</span><span class="p">(</span><span class="n">taskId</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Check export task status ...&quot;</span><span class="p">)</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/restapi/v1.0/glip/data-export/&quot;</span> <span class="o">+</span> <span class="n">taskId</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
    <span class="n">jsonObj</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">jsonObj</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;Completed&quot;</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">jsonObj</span><span class="o">.</span><span class="n">datasets</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
              <span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;rc-export-reports_&quot;</span> <span class="o">+</span> <span class="n">jsonObj</span><span class="o">.</span><span class="n">creationTime</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.zip&quot;</span>
                <span class="n">get_report_archived_content</span><span class="p">(</span><span class="n">jsonObj</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">jsonObj</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;Accepted&quot;</span> <span class="o">||</span> <span class="n">jsonObj</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;InProgress&quot;</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">get_compliance_export_task</span><span class="p">(</span><span class="n">taskId</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="nb">print</span> <span class="p">(</span><span class="n">jsonObj</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_report_archived_content</span><span class="p">(</span><span class="n">contentUri</span><span class="p">,</span> <span class="n">zipFile</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Save export zip file to the local machine.&quot;</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">create_url</span><span class="p">(</span><span class="n">contentUri</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">);</span>
    <span class="n">fileHandler</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">zipFile</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fileHandler</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="n">create_compliance_export_task</span><span class="p">()</span>
</code></pre></div>
</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">PHP</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">);</span>

<span class="nv">$rcsdk</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RingCentral\SDK\SDK</span><span class="p">(</span> <span class="s2">&quot;client_id&quot;</span><span class="p">,</span> <span class="s2">&quot;client_secret&quot;</span><span class="p">,</span> <span class="s2">&quot;server_url&quot;</span> <span class="p">);</span>

<span class="nv">$platform</span> <span class="o">=</span> <span class="nv">$rcsdk</span><span class="o">-&gt;</span><span class="na">platform</span><span class="p">();</span>
<span class="nv">$platform</span><span class="o">-&gt;</span><span class="na">login</span><span class="p">(</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="s2">&quot;extension_number&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span> <span class="p">);</span>

<span class="nx">create_compliance_export_task</span><span class="p">();</span>

<span class="k">function</span> <span class="nf">create_compliance_export_task</span><span class="p">(){</span>
    <span class="k">global</span> <span class="nv">$platform</span><span class="p">;</span>
    <span class="k">echo</span> <span class="p">(</span><span class="s2">&quot;Create export task.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="nv">$endpoint</span> <span class="o">=</span> <span class="s2">&quot;/restapi/v1.0/glip/data-export&quot;</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$platform</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="nv">$endpoint</span><span class="p">,</span>
        <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;timeFrom&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;2019-08-01T00:00:00.000Z&quot;</span><span class="p">,</span>
        <span class="s1">&#39;timeTo&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;2019-08-26T23:59:59.999Z&quot;</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="nv">$json</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">();</span>
    <span class="nx">get_compliance_export_task</span><span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span>
    <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">\RingCentral\SDK\Http\ApiException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span><span class="p">(</span><span class="nv">$e</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">get_compliance_export_task</span><span class="p">(</span><span class="nv">$taskId</span><span class="p">){</span>
    <span class="k">global</span> <span class="nv">$platform</span><span class="p">;</span>
    <span class="k">echo</span> <span class="p">(</span><span class="s2">&quot;Check export task status ...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="nv">$endpoint</span> <span class="o">=</span> <span class="s2">&quot;/restapi/v1.0/glip/data-export/&quot;</span> <span class="o">.</span> <span class="nv">$taskId</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$platform</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$endpoint</span><span class="p">);</span>
    <span class="nv">$json</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;Completed&quot;</span><span class="p">){</span>
        <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span><span class="o">&lt;</span><span class="nb">count</span><span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">datasets</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
          <span class="nv">$fileName</span> <span class="o">=</span> <span class="s2">&quot;rc-export-reports_&quot;</span> <span class="o">.</span> <span class="nv">$json</span><span class="o">-&gt;</span><span class="na">creationTime</span> <span class="o">.</span> <span class="s2">&quot;_&quot;</span> <span class="o">.</span> <span class="nv">$i</span> <span class="o">.</span> <span class="s2">&quot;.zip&quot;</span><span class="p">;</span>
          <span class="nx">get_report_archived_content</span><span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">datasets</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">,</span> <span class="nv">$fileName</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;Accepted&quot;</span> <span class="o">||</span> <span class="nv">$json</span><span class="o">-&gt;</span><span class="na">status</span> <span class="o">==</span> <span class="s2">&quot;InProgress&quot;</span><span class="p">){</span>
        <span class="nb">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
        <span class="nx">get_compliance_export_task</span><span class="p">(</span><span class="nv">$taskId</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span>
      <span class="k">echo</span> <span class="p">(</span><span class="nv">$json</span><span class="o">-&gt;</span><span class="na">status</span><span class="p">);</span>
    <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">\RingCentral\SDK\Http\ApiException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span><span class="p">(</span><span class="nv">$e</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">get_report_archived_content</span><span class="p">(</span><span class="nv">$contentUri</span><span class="p">,</span> <span class="nv">$fileName</span><span class="p">){</span>
    <span class="k">global</span> <span class="nv">$platform</span><span class="p">;</span>
    <span class="k">echo</span> <span class="p">(</span><span class="s2">&quot;Save export zip file to the local machine.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$platform</span><span class="o">-&gt;</span><span class="na">createUrl</span><span class="p">(</span><span class="nv">$contentUri</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;addServer&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;addMethod&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
    <span class="s1">&#39;addToken&#39;</span>  <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">));</span>
    <span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$fileName</span><span class="p">,</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$uri</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><label for="__tabbed_1_4">C#</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">RingCentral</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Export_Compliance_Data</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
    <span class="k">static</span> <span class="n">RestClient</span> <span class="n">rcsdk</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">rcsdk</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span><span class="p">(</span><span class="s">&quot;client_id&quot;</span><span class="p">,</span> <span class="s">&quot;client_secret&quot;</span><span class="p">,</span> <span class="s">&quot;server_url&quot;</span><span class="p">);</span>
        <span class="k">await</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">Authorize</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span> <span class="s">&quot;extension_number&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">);</span>
        <span class="n">create_compliance_export_task</span><span class="p">().</span><span class="n">Wait</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">static</span> <span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">create_compliance_export_task</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">parameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateDataExportTaskRequest</span><span class="p">();</span>
        <span class="n">parameters</span><span class="p">.</span><span class="n">timeFrom</span> <span class="p">=</span> <span class="s">&quot;2019-08-01T00:00:00.000Z&quot;</span><span class="p">;</span>
        <span class="n">parameters</span><span class="p">.</span><span class="n">timeTo</span> <span class="p">=</span> <span class="s">&quot;2019-08-26T23:59:59.999Z&quot;</span><span class="p">;</span>

        <span class="kt">var</span> <span class="n">resp</span> <span class="p">=</span> <span class="k">await</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">Restapi</span><span class="p">().</span><span class="n">Glip</span><span class="p">().</span><span class="n">DataExport</span><span class="p">().</span><span class="n">Post</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Create export task&quot;</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">taskId</span> <span class="p">=</span> <span class="n">resp</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
        <span class="n">Boolean</span> <span class="n">polling</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">polling</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Check export task status ...&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
        <span class="n">resp</span> <span class="p">=</span> <span class="k">await</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">Restapi</span><span class="p">().</span><span class="n">Glip</span><span class="p">().</span><span class="n">DataExport</span><span class="p">(</span><span class="n">taskId</span><span class="p">).</span><span class="n">Get</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">status</span> <span class="p">!=</span> <span class="s">&quot;InProgress&quot;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">polling</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">status</span> <span class="p">==</span> <span class="s">&quot;Completed&quot;</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">resp</span><span class="p">.</span><span class="n">datasets</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">fileName</span> <span class="p">=</span> <span class="s">&quot;rc-export-reports_&quot;</span> <span class="p">+</span> <span class="n">resp</span><span class="p">.</span><span class="n">creationTime</span> <span class="p">+</span> <span class="s">&quot;_&quot;</span> <span class="p">+</span> <span class="n">i</span> <span class="p">+</span> <span class="s">&quot;.zip&quot;</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">contentUrl</span> <span class="p">=</span> <span class="n">resp</span><span class="p">.</span><span class="n">datasets</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">uri</span> <span class="p">+</span> <span class="s">&quot;?access_token=&quot;</span> <span class="p">+</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">token</span><span class="p">.</span><span class="n">access_token</span><span class="p">;</span>
            <span class="n">WebClient</span> <span class="n">webClient</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebClient</span><span class="p">();</span>
            <span class="n">webClient</span><span class="p">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="n">contentUrl</span><span class="p">,</span> <span class="n">fileName</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Save report zip file to the local machine.&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Error!&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><label for="__tabbed_1_5">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">ringcentral</span><span class="p">.*;</span>
<span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">ringcentral</span><span class="p">.</span><span class="n">definitions</span><span class="p">.*;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">BufferedInputStream</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">FileOutputStream</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">IOException</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">net</span><span class="p">.</span><span class="n">URL</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Export_Compliance_Data</span> <span class="p">{</span>
<span class="k">static</span> <span class="n">RestClient</span> <span class="n">rcsdk</span><span class="p">;</span>
  <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
      <span class="kt">var</span> <span class="n">obj</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Export_Compliance_Data</span><span class="p">();</span>
      <span class="n">rcsdk</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RestClient</span><span class="p">(</span><span class="s">&quot;client_id&quot;</span><span class="p">,</span> <span class="s">&quot;client_secret&quot;</span><span class="p">,</span> <span class="s">&quot;server_url&quot;</span><span class="p">);</span>
      <span class="k">try</span> <span class="p">{</span>
          <span class="n">rcsdk</span><span class="p">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">,</span> <span class="s">&quot;extension_number&quot;</span><span class="p">,</span> <span class="s">&quot;password&quot;</span><span class="p">);</span>
          <span class="n">obj</span><span class="p">.</span><span class="n">create_compliance_export_task</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">RestException</span> <span class="p">|</span> <span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">e</span><span class="p">.</span><span class="n">printStackTrace</span><span class="p">();</span>
      <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="k">void</span> <span class="nf">create_compliance_export_task</span><span class="p">()</span> <span class="n">throws</span> <span class="n">RestException</span><span class="p">,</span> <span class="n">IOException</span> <span class="p">{</span>
  <span class="kt">var</span> <span class="n">parameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateDataExportTaskRequest</span><span class="p">();</span>
      <span class="n">parameters</span><span class="p">.</span><span class="n">timeFrom</span> <span class="p">=</span> <span class="s">&quot;2019-08-01T00:00:00.000Z&quot;</span><span class="p">;</span>
      <span class="n">parameters</span><span class="p">.</span><span class="n">timeTo</span> <span class="p">=</span> <span class="s">&quot;2019-08-26T23:59:59.999Z&quot;</span><span class="p">;</span>

      <span class="kt">var</span> <span class="n">resp</span> <span class="p">=</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">restapi</span><span class="p">().</span><span class="n">glip</span><span class="p">().</span><span class="n">dataexport</span><span class="p">().</span><span class="n">post</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
      <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Create export task.&quot;</span><span class="p">);</span>
      <span class="kt">var</span> <span class="n">taskId</span> <span class="p">=</span> <span class="n">resp</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
      <span class="n">boolean</span> <span class="n">polling</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="n">polling</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Check export task status ...&quot;</span><span class="p">);</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">Thread</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">resp</span> <span class="p">=</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">restapi</span><span class="p">().</span><span class="n">glip</span><span class="p">().</span><span class="n">dataexport</span><span class="p">(</span><span class="n">taskId</span><span class="p">).</span><span class="k">get</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">resp</span><span class="p">.</span><span class="n">status</span><span class="p">.</span><span class="k">equals</span><span class="p">(</span><span class="s">&quot;InProgress&quot;</span><span class="p">))</span>
              <span class="n">polling</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">e</span><span class="p">.</span><span class="n">printStackTrace</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">resp</span><span class="p">.</span><span class="n">status</span><span class="p">.</span><span class="k">equals</span><span class="p">(</span><span class="s">&quot;Completed&quot;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">resp</span><span class="p">.</span><span class="n">datasets</span><span class="p">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">fileName</span> <span class="p">=</span> <span class="s">&quot;./src/test/resources/export-reports_&quot;</span> <span class="p">+</span> <span class="n">resp</span><span class="p">.</span><span class="n">creationTime</span> <span class="p">+</span> <span class="s">&quot;_&quot;</span> <span class="p">+</span> <span class="n">i</span> <span class="p">+</span> <span class="s">&quot;.zip&quot;</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">contentUrl</span> <span class="p">=</span> <span class="n">resp</span><span class="p">.</span><span class="n">datasets</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">uri</span> <span class="p">+</span> <span class="s">&quot;?access_token=&quot;</span> <span class="p">+</span> <span class="n">rcsdk</span><span class="p">.</span><span class="n">token</span><span class="p">.</span><span class="n">access_token</span><span class="p">;</span>
            <span class="k">try</span> <span class="p">(</span><span class="n">BufferedInputStream</span> <span class="n">inputStream</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BufferedInputStream</span><span class="p">(</span><span class="k">new</span> <span class="n">URL</span><span class="p">(</span><span class="n">contentUrl</span><span class="p">).</span><span class="n">openStream</span><span class="p">());</span>
                <span class="n">FileOutputStream</span> <span class="n">fileOS</span> <span class="p">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span> <span class="p">{</span>
                <span class="kt">byte</span> <span class="n">data</span><span class="p">[]</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="p">[</span><span class="m">1024</span><span class="p">];</span>
                <span class="kt">int</span> <span class="n">byteContent</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">((</span><span class="n">byteContent</span> <span class="p">=</span> <span class="n">inputStream</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1024</span><span class="p">))</span> <span class="p">!=</span> <span class="p">-</span><span class="m">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">fileOS</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">byteContent</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Save report zip file to the local machine.&quot;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
               <span class="c1">// handles IO exceptions</span>
                <span class="n">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Error!&quot;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><label for="__tabbed_1_6">Ruby</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">require</span> <span class="err">&#39;</span><span class="n">ringcentral</span><span class="err">&#39;</span>
<span class="n">require</span> <span class="s">&quot;open-uri&quot;</span>

<span class="err">$</span><span class="n">rc</span> <span class="p">=</span> <span class="n">RingCentral</span><span class="p">.</span><span class="k">new</span><span class="p">(</span> <span class="err">&#39;</span><span class="n">client_id</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">client_secret</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">server_url</span><span class="err">&#39;</span><span class="p">)</span>
<span class="err">$</span><span class="n">rc</span><span class="p">.</span><span class="n">authorize</span><span class="p">(</span> <span class="n">username</span><span class="p">:</span>  <span class="err">&#39;</span><span class="n">username</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">extension</span><span class="p">:</span> <span class="err">&#39;</span><span class="n">extension_number</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span>  <span class="err">&#39;</span><span class="n">password</span><span class="err">&#39;</span><span class="p">)</span>

<span class="n">def</span> <span class="nf">create_compliance_export_task</span><span class="p">()</span>
    <span class="n">puts</span> <span class="s">&quot;Create export task.&quot;</span>
    <span class="n">endpoint</span> <span class="p">=</span> <span class="s">&quot;/restapi/v1.0/glip/data-export&quot;</span>
    <span class="n">response</span> <span class="p">=</span> <span class="err">$</span><span class="n">rc</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="n">timeFrom</span><span class="p">:</span> <span class="s">&quot;2019-07-01T00:00:00.000Z&quot;</span><span class="p">,</span>
    <span class="n">timeTo</span><span class="p">:</span> <span class="s">&quot;2019-07-29T23:59:59.999Z&quot;</span>
      <span class="p">})</span>
    <span class="n">get_compliance_export_task</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">id</span><span class="err">&#39;</span><span class="p">])</span>
<span class="n">end</span>

<span class="n">def</span> <span class="nf">get_compliance_export_task</span><span class="p">(</span><span class="n">taskId</span><span class="p">)</span>
    <span class="n">puts</span> <span class="s">&quot;Check export task status ...&quot;</span>
    <span class="n">endpoint</span> <span class="p">=</span> <span class="s">&quot;/restapi/v1.0/glip/data-export/&quot;</span> <span class="p">+</span> <span class="n">taskId</span>
    <span class="n">response</span> <span class="p">=</span> <span class="err">$</span><span class="n">rc</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
    <span class="n">body</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span>
    <span class="k">if</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">status</span><span class="err">&#39;</span><span class="p">]</span> <span class="p">==</span> <span class="s">&quot;Completed&quot;</span>
    <span class="n">length</span> <span class="p">=</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">datasets</span><span class="err">&#39;</span><span class="p">].</span><span class="n">length</span>
    <span class="k">for</span> <span class="n">i</span> <span class="nf">in</span> <span class="p">(</span><span class="m">0.</span><span class="p">..</span><span class="n">length</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="p">=</span> <span class="s">&quot;rc-export-reports_&quot;</span> <span class="p">+</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">creationTime</span><span class="err">&#39;</span><span class="p">]</span> <span class="p">+</span> <span class="s">&quot;_&quot;</span> <span class="p">+</span> <span class="n">i</span><span class="p">.</span><span class="n">to_s</span> <span class="p">+</span> <span class="s">&quot;.zip&quot;</span>
        <span class="n">get_report_archived_content</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">datasets</span><span class="err">&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="err">&#39;</span><span class="n">uri</span><span class="err">&#39;</span><span class="p">],</span> <span class="n">fileName</span><span class="p">)</span>
    <span class="n">end</span>
    <span class="n">elsif</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">status</span><span class="err">&#39;</span><span class="p">]</span> <span class="p">==</span> <span class="s">&quot;Accepted&quot;</span> <span class="p">||</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">status</span><span class="err">&#39;</span><span class="p">]</span> <span class="p">==</span> <span class="s">&quot;InProgress&quot;</span>
    <span class="n">sleep</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
    <span class="n">get_compliance_export_task</span><span class="p">(</span><span class="n">taskId</span><span class="p">)</span>
    <span class="k">else</span>
    <span class="n">puts</span> <span class="n">body</span><span class="p">[</span><span class="err">&#39;</span><span class="n">status</span><span class="err">&#39;</span><span class="p">]</span>
    <span class="n">end</span>
<span class="n">end</span>

<span class="n">def</span> <span class="nf">get_report_archived_content</span><span class="p">(</span><span class="n">contentUri</span><span class="p">,</span> <span class="n">zipFile</span><span class="p">)</span>
    <span class="n">puts</span> <span class="s">&quot;Save report zip file to the local machine.&quot;</span>
    <span class="n">uri</span> <span class="p">=</span> <span class="n">contentUri</span> <span class="p">+</span> <span class="s">&quot;?access_token=&quot;</span> <span class="p">+</span> <span class="err">$</span><span class="n">rc</span><span class="p">.</span><span class="n">token</span><span class="p">[</span><span class="err">&#39;</span><span class="n">access_token</span><span class="err">&#39;</span><span class="p">]</span>
    <span class="n">open</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">do</span> <span class="p">|</span><span class="n">data</span><span class="p">|</span>
      <span class="n">File</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">zipFile</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="p">|</span><span class="n">file</span><span class="p">|</span>
    <span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">read</span><span class="p">)</span>
      <span class="n">end</span>
    <span class="n">end</span>
<span class="n">end</span>

<span class="nf">create_compliance_export_task</span><span class="p">()</span>
</code></pre></div>
</div>
</div>

<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
  <li class="last-updated-holder displayDate loading">
    <span class="last-updated-text">Last updated:</span>
    <time role="presentation" datetime="2018-10-25T00:00:00.000Z" data-article-date-source="ms.date"></time>
  </li>
<!--
  <li class="readingTime">
    2 minutes to read
  </li>
-->
  <li class="contributors-holder">
    <span class="contributors-text">Contributors</span>
    <ul class="contributors" data-bi-name="contributors"></ul>
  </li>
</ul>
</div>
      <div id="sidebar-toc" class="sidebar col-md-3">
        <div class="repo">
              <a class="nav-link" href="https://github.com/ringcentral/ringcentral-api-docs/tree/master/docs/team-messaging/manual/compliance-export.md"><i class="fa fa-github"></i> Edit on GitHub</a>
        </div>

        
        <div id="rating" class="nav-link">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
        

	<nav id="toc" data-toggle="toc" class="sticky-top sticky-offset"></nav>
      </div>

    </div>
    </div><footer class="col-md-12">
  <nav class="container">
    <div class="row row-1">
      <div class="col-6">
	<a class="brand nav-link" href="http://developers.ringcentral.com/">Back to main site</a>
      </div>
      <div class="col-6">
	<ul class="nav flex-row ml-md-auto d-none d-md-flex pull-right">
	  <li class="nav-item"><a class="nav-link" href="http://www.ringcentral.com/legal.html" rel="nofollow">Legal</a></li>
	  <li class="nav-item"><a class="nav-link" href="https://www.ringcentral.com/legal/privacy-notice.html" rel="nofollow">Privacy Notice</a></li>
	  <li class="nav-item"><a class="nav-link" href="https://devcommunity.ringcentral.com/" rel="nofollow">Community</a></li>
	  <li class="nav-item"><a class="nav-link" href="https://medium.com/ringcentral-developers" rel="nofollow">Blog</a></li>
	</ul>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
	<p>&copy;1999-2020 RingCentral, Inc. All rights reserved.</p>
      </div>
      <div class="col-6">
	<ul class="nav flex-row ml-md-auto d-none d-md-flex pull-right">
	  <li><a class="nav-link footer-image-link footer-image-link-facebook" href="http://www.facebook.com/ringcentral">
	      <i class="fa fa-facebook"></i></a></li>
	  <li><a class="nav-link footer-image-link footer-image-link-twitter" href="http://twitter.com/ringcentraldevs">
	      <i class="fa fa-twitter"></i></a></li>
	  <li><a class="nav-link footer-image-link footer-image-link-linkedin" href="http://www.linkedin.com/company/ringcentral">
	      <i class="fa fa-linkedin"></i></a></li>
	  <li><a class="nav-link footer-image-link footer-image-link-youtube" href="http://www.youtube.com/ringcentral">
	      <i class="fa fa-youtube"></i></a></li>
	</ul>
      </div>
  </nav>
</footer>
<script type="text/javascript" src="../../../js/rc.js"></script>
    <script>
      var base_url = "../../..",
          shortcuts = ["foo"];
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" defer></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" defer></script>
    <script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js" defer></script>
    <script src="../../../js/base.js" defer></script>

    <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <p class="h4 modal-title">Keyboard Shortcuts</p>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
  </body>
</html>
